image: ulrichschreiner/go-web-dev

before_script:
  - docker login -u $QUAY_USER -p $QUAY_PWD quay.io

stages:
  - build

build stable:
  stage: build
  script:
    - make build-stable push
  only:
    - master

build insider:
  stage: build
  script:
    - make build-insiders push-insiders
  only:
    - master

schedule:
  stage: build
  script:
    - make build-insiders push-insiders
  only:
    - $SCHEDULE != null
